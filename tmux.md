# tmux

## tmux 会话和窗口

mux采用C/S模型构建，输入tmux命令就相当于开启了一个服务器，此时默认将新建一个会话，然后会话中默认新建一个窗口，窗口中默认新建一个面板。会话、窗口、面板之间的联系如下：

一个tmux session（会话）可以包含多个window（窗口），窗口默认充满会话界面，因此这些窗口中可以运行相关性不大的任务。

一个window又可以包含多个pane（面板），窗口下的面板，都处于同一界面下，这些面板适合运行相关性高的任务，以便同时观察到它们的运行情况。

## 操作

### 新建会话

```
tmux # 新建一个无名称的会话
tmux new -s demo # 新建一个名称为demo的会话
```

### 断开当前会话

> tmux detach # 断开当前会话，会话在后台运行 快捷键 Ctrl+b + d

### 进入断开的会话

```
tmux a # 默认进入第一个会话
tmux a -t demo # 进入到名称为demo的会话
```

### 关闭会话

```
tmux kill-session -t demo # 关闭demo会话
tmux kill-server # 关闭服务器，所有的会话都将关闭
```

### 查看所有的会话

```
tmux list-session # 查看所有会话
tmux ls # 查看所有会话，提倡使用简写形式
# 如果是在会话中，使用快捷键 Ctrl+b + s，打开会话列表
``` 

### tmux 快捷指令

tmux 中的快捷指令都由 Ctrl+b 进入控制台，然后输入指令。

系统指令
```
? 帮助文档
d 断开会话
s 显示列表并选择
: 进入命令行模式
[ 进入复制模式
] 粘贴复制的文本
~ 列出提示信息缓存
r 强制重载当前会话
```
窗口指令
```
c 新建窗口
& 关闭当前窗口
0-9 切换窗口
p 上一个窗口
n 下一个
w 打开窗口列表并选择
， 重命名当前窗口
```
面板指令
```
| 水平新建面板
- 垂直新建面板
x 关闭面板
z 最大化面板，再按一次恢复
！ 当前面板在新窗口中打开
q 显示面板编号
; 切换到最后一次使用的面板
{} 前后置换面板
方向键、hjjkl 移动切换面板
Alt、Ctrl + 方向键 调整面板边缘
t 显示时钟
```

### tmux 配置

在已经创建的窗口中，即使加载了新的配置，旧的配置依然有效（只要你新加的功能没有覆盖旧的配置)

```
set -g prefix C-a #
unbind C-b # C-b即Ctrl+b键，unbind意味着解除绑定
bind C-a send-prefix # 绑定Ctrl+a为新的指令前缀
bind r source-file /etc/tmux.conf  \; display-message "Config reloaded.." # 绑定r 键为加载文件的快捷指令。
```
