# python知识点

## 数据库编程

### 为什么需要数据库编程

数据持久化存储

### DB-API

DB-API为不同的数据库提供了一致的接口，定义了必须的对象和数据库存储方式，python各个数据库模块需要兼容DB-API，包含几个对象：

1. 数据库连接对象：connection

2. 数据库交互对象：cursor（游标对象）

3. 数据库异常类：exceptions

数据库对象与数据库通信，有close、commit、rollback、cursor等方法。

游标对象可以执行数据库命令和得到查询结果，execute(sql)、fetchone()得到结果集的下一行、fetchmany(size)、fetchall(),在sql语句中，要确认一下数据类型，方式sql语句执行时类型不匹配

使用数据库的过程包括

1. 创建connection对象，获取cursor

2. 使用cursor执行SQL

3. 使用cursor获取数据、判断执行状态

4. 提交事务 或者 回滚事务

### 对象-关系映射（ORM）

考虑对象，不是sql。避免编写sql语句，将数据表转换为python类，它封装了数据库操作，只需面向对象。python中的ORM模块有很多种，django框架用的是自己的组件，不同模块之间的模型操作方法不同。

映射关系：

- 数据库的表（table） --> 类（class）
- 记录（record，行数据）--> 对象（object）
- 字段（field）--> 对象的属性（attribute）

ORM将数据库的增删改查封装成方法，表之间的关系设置为字段属性。

## 多线程编程

需要多线程完成的任务：异步的，各个事物的运行顺序不重要，可以是不确定的。

### 线程与进程

进程是内存中的程序，有属于自己的地址、内存、数据栈和其他信息，由操作系统来管理进程，但是进程之间共享信息需要通过辅助工具，不能直接共享。

线程是进程的分支，同一进程中的线程运行在同一环境中，共享数据空间。它有开始，顺序执行和结束三部分，在运行时可能被中断或者挂起，让其他线程运行，这叫做让步。

### 全局解释器锁GIL

python代码执行由虚拟机来控制，同一时刻只能由一个线程在执行，线程间的调度由GIL控制，线程在等待I/O时或运行15ms（py3，py2是执行1000字节码）后释放GIL。

### 多线程模块 threading

其中Thread类创建线程,创建进程对象后，使用start方法开始进程，join方法用于主线程等待线程完成(如果给了timeout参数会等到超时)。