# VIM操作

## VIM介绍

VI是所有的 Unix Like 系统都会内建的文本编辑器，VIM是从VI发展出来的一个文本编辑器。具有代码补全，编译和错误跳转等功能，使用非常广泛。

VIM分为三种模式，命令模式，输入模式，底线命令模式，他们分别用在：
命令模式：用户刚启动VIM时，就进入了命令模式，此时输入的字符是命令。
输入模式：此时输入的字符会对文本内容进行修改。
底线命令模式：在命令模式中输入：进入，执行对文件的保存，退出编辑等操作。

vi还支持暂存档操作，当多人共同操作文档或者vim被终端时，暂存档可以提供作用。暂存档一般为原文件filename.swp，文档正常操作退出时，暂存档会被清楚，但是非正常情况退出时，再打开原文件会提示，此时按照需求选择模式。并且在离开vim后还要自行删除暂存档，这样下次就不会出现警告。

## 命令模式常用

### 光标移动

h：左移一个字符

l：右移一个字符

j：下移一个字符

k：上移一个字符

前面可以加数字来实现多次移动，如10j为向下移动十行

n\<space\> 输入数字按空格键，光标右移n字符

0：光标到此行最前

$：光标到此行最后

ctrl按键 +f 屏幕向下移动一页 +b向上移动一页 +d 向下移动半页 +u 向上移动半页

\+ 光标移动到下一行

\- 移动到下一行 (通过换行符来判断上下行，而不是屏幕上的上下行)

H：光标移动到屏幕最上方的一行首字符

M：光标移动到屏幕中央一行的首字符

L：光标移动到屏幕最下方一行的首字符

G:光标移动到最后一行

nG：光标移动到第n行

gg：光标移动到第一行

n\<Enter\>:光标向下移动n行

### 搜索替换

/word: 向光标之下寻找word字符串

？word: 向光标之上寻找word字符串

n:代表重复上一个搜寻动作

N:反向进行前一个搜寻动作

* 比如  :n1,n2s/word1/word2/g 在第n1 与 n2 行之间寻找 word1 这个字符串，并将该字符串取代为 word2
* 例如：:1,$s/word1/word2/gc 从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！且在取代前显示提示字符给用户确认 (confirm) 是否需要取代 不加c为不需确认

### 删除，复制，粘贴

x:向后删除一个字符

X：向前删除一个字符

nx:连续向后删除n个字符

dd:删除光标所在的那一行

ndd:删除光标所在的向下n行

d1G:删除光标所在到第一行的所有数据

dG:删除光标所在到最后一行的数据

d$:删除光标所在处到该行最后一个字符

d0:删除光标所在处到该行第一个字符

yy:复制光标所在的那一行

nyy:复制光标所在的向下n行

y1G:复制光标所在到第一行的所有数据

yG:复制光标所在到最后一行的数据

y$:复制光标所在处到该行最后一个字符

y0:复制光标所在处到该行第一个字符

p:将复制的数据在光标下一行

P:将复制的数据贴在光标上一行

J:将光标所在行和下一行的数据结合成一行

c:重复删除多个数据，，例如向下删除 10 行，[ 10cj ]

u:复原前一个数据

Ctrl+r:重做上一个动作

. :重复前一个动作

### 进入到编辑模式

i:从当前光标所在处输入

I:在当前行的第一个非空格符处开始输入

a:从目前光标所在的下一个字符处开始输入

A:从光标所在行的最后一个字符处开始输入

o:在目前光标所在的下一行处输入新的一行

O:在目前光标所在处的上一行输入新的一行

### 取代模式

r:取代光标所在的那一个字符一次

R:一直取代光标所在的文字，直到按下 ESC 为止

Esc:退出编辑模式，回到一般模式中

### 底线命令模式

在命令模式下输入: 进入

:w  将编辑的数据写入硬盘档案中

:w! 若文件属性为『只读』时，强制写入该档案。不过，到底能不能写入， 还是跟你对该档案的档案权限有关

:q  离开vi

:q! 不存储修改离开vi

:wq 储存后离开vi

ZZ  两个大写的Z 若档案没有更动，则不储存离开，若档案已经被更动过，则储存后离开

:w [filename]  将编辑的数据储存成另一个档案（类似另存新档）

:r [filename]  在编辑的数据中，读入另一个档案的数据。即将 『filename』 这个档案内容加到游标所在行后面

:n1,n2 w [filename] 将 n1 到 n2 的内容储存成 filename 这个档案

:! command  暂时离开 vi 到指令行模式下执行 command 的显示结果 例如 :! ls

:n  定位到n行

### VI环境变更

:set nu  显示行号，设定之后，会在每一行的前缀显示该行的行号

:set nonu 取消行号

### vi的区块选择

按下 v 或者 V 或者 [Ctrl]+v 时, 这个时候光标移动过的地方就会开始反白,这三个按键的意义分别是:

v:字符选择,会将光标经过的地方反白选择

V:列选择,会将光标经过的列反白选择

Ctrl+v:区块选择,可以用长方形的方式选择资料

y:将反白的地方复制起来

d:将反白的地方删除

p:将刚刚复制的区块,在游标所在处贴上

#### 批量注释

>Ctrl + v 进入块选择模式，然后移动光标选中你要注释的行，再按大写的 I 进入行首插入模式输入注释符号如 // 或 #，输入完毕之后，按两下 ESC，Vim 会自动将你选中的所有行首都加上注释